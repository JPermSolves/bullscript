<!DOCTYPE html>
<html>
	<head>
		<base href="https://jpermsolves.github.io/bull-script">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="apple-touch-icon" sizes="180x180" href="https://jpermsolves.github.io/bull-script/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="https://jpermsolves.github.io/bull-script/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://jpermsolves.github.io/bull-script/favicon-16x16.png">
		<link rel="manifest" href="https://jpermsolves.github.io/bull-script/site.webmanifest">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans&family=Noto+Sans+Arabic&family=Noto+Sans+Hebrew&family=Noto+Sans+Javanese&family=Noto+Sans+SC&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
		<title>Bullscript | A game about Unicode.</title>
		<style>
			body {
				text-align: center;
				margin: 0.1em;
				font-family: "Noto Sans";
			}
			button {
				font-family: "Noto Sans";
				white-space: normal !important;
				height: 100% !important;
			}
			.material-symbols-outlined {
				font-variation-settings:
				'FILL' 0,
				'wght' 400,
				'GRAD' 0,
				'opsz' 48;
				font-size: 5em;
			}
			.menu-bar {
				font-size: 4em;
			}
			.big {
				font-size: 5em;
				margin: 0.01em;
			}
			.w3-cell {
				width: 50%;
			}
		</style>
		<script>
			
		</script>
	</head>
	<body>
		<header class="w3-container">
			<p class="big">Bullscriptâ„¢</p>
		</header>
		<div class="w3-container">
			<div class="w3-container">
				<p id="character" class="big w3-margin-bottom"></p>
			</div>
			<div class="w3-container"> 
				<div class="w3-cell-row">
					<div class="w3-cell w3-mobile">
						<button class="w3-button w3-block w3-black w3-xxlarge choice" onclick="verify(this);"></button>
					</div>
					<div class="w3-cell w3-mobile">
						<button class="w3-button w3-block w3-black w3-xxlarge choice" onclick="verify(this);"></button>
					</div>
				</div>
				<div class="w3-cell-row">
					<div class="w3-cell w3-mobile">
						<button class="w3-button w3-block w3-black w3-xxlarge choice" onclick="verify(this);"></button>
					</div>
					<div class="w3-cell w3-mobile">
						<button class="w3-button w3-block w3-black w3-xxlarge choice" onclick="verify(this);"></button>
					</div>
				</div>
			</div>
			<div class="w3-container w3-margin-top">
				<button id="next" class="w3-button w3-block w3-black w3-xxlarge" onclick="if (!clickable) {setup();}">Next</button>
			</div>
			<div class="w3-container">
				<p class="w3-xxlarge w3-hide-small" id="instructions">Click one</p>
			</div>
		</div>
		<footer class="w3-container">
			<div class="w3-cell-row">
				<div class="w3-cell">
					<button class="w3-button w3-white w3-hover-gray w3-block material-symbols-outlined">brightness_6</button>
				</div>
				<div class="w3-cell">
					<button class="w3-button w3-white w3-hover-gray w3-block material-symbols-outlined">info</button>
				</div>
			</div>
		</footer>
		<script>
			var char, charSet, charSetName, correctButton, falseCharSet, usedValues, wrongButtons;
			const charSetList = ["Basic Latin (ASCII)", "Latin-1 Supplement", "Hebrew", "Hebrew", "Hebrew", "CJK Unified Ideographs (Han)", "Arabic", "Javanese", "Javanese", "Javanese", "Hiragana", "Hiragana"];
			const charSetFirstNumInIntervalList = [33, 161, 1425, 1488, 1520, 19968, 1537, 43392, 43471, 43486, 12353, 12441];
			const charSetLastNumInIntervalList = [127, 255, 1479, 1512, 1524, 40959, 1791, 43469, 43481, 43487, 12438, 12447];
			const fontList = ["Noto Sans", "Noto Sans", "Noto Sans Hebrew", "Noto Sans Hebrew", "Noto Sans Hebrew", "Noto Sans SC", "Noto Sans Arabic", "Noto Sans Javanese", "Noto Sans Javanese", "Noto Sans Javanese", "Noto Sans Japanese", "Noto Sans Japanese"]
			const happyPhrases = ["Amazing", "Nice", "Whoa!", "Whoo!", "Easy."];
			const sadPhrases = ["NO!!!", "Ooh, so close.", "Nah.", "Sorry."]
			let character, buttons, instructions;
			character = document.getElementById("character");
			buttons = document.querySelectorAll(".choice");
			instructions = document.getElementById("instructions")
			function randomIntFromInterval(min, max) { // min and max included 
				return Math.floor(Math.random() * (max - min + 1) + min);
			}
			function equalButtons() {
				var buttonList = buttons;
				var button = 0;
				if (buttonList.length % 2 == 1) {
					buttonList.pop();
				}
				for (let i = 0; i < buttonList.length / 2 - 1; i += 2) {
					if (buttonList[i].style.height != buttonList[i + 1].style.height) {
						buttonList[i].style.height = max(buttonList[i].style.height, buttonList[i + 1].style.height);
						buttonList[i + 1].style.height = max(buttonList[i].style.height, buttonList[i + 1].style.height);
					}
				}
			}
			function setup() {
				wrongButtons = [];
				clickable = true;
				usedValues = [];
				charSet = randomIntFromInterval(0, charSetList.length - 1);
				char = randomIntFromInterval(charSetFirstNumInIntervalList[charSet], charSetLastNumInIntervalList[charSet]);
				charSetName = charSetList[charSet];
				character.innerHTML = String.fromCodePoint(char);
				correctButton = randomIntFromInterval(0, buttons.length - 1);
				buttons[correctButton].innerHTML = charSetName;
				usedValues.push(charSetName);
				for (let i = 0; i < buttons.length; i++) {
					if (i !== correctButton) {
						falseCharSet = randomIntFromInterval(0, charSetList.length - 1);
						while (usedValues.includes(charSetList[falseCharSet])) {
							falseCharSet = randomIntFromInterval(0, charSetList.length - 1);
						}
						buttons[i].innerHTML = charSetList[falseCharSet];
						wrongButtons.push(buttons[i]);
						usedValues.push(charSetList[falseCharSet]);
					}
					buttons[i].className = "w3-button w3-black w3-block w3-xxlarge";
				}
				character.style.fontFamily = fontList[charSet];
				instructions.innerHTML = "Click one";
				//equalButtons();
			}
			function verify(button) {
				if (clickable) {
					buttons[correctButton].className = "w3-button w3-green w3-block w3-xxlarge w3-hover-green";
					for (let i = 0; i < wrongButtons.length; i++) {
						wrongButtons[i].className = "w3-button w3-red w3-block w3-xxlarge w3-hover-red";
					}
					if (button.innerHTML === charSetName) {
						instructions.innerHTML = happyPhrases[randomIntFromInterval(0, happyPhrases.length - 1)];
					} else {
						instructions.innerHTML = sadPhrases[randomIntFromInterval(0, sadPhrases.length - 1)];
					}
					clickable = false;
				}
			}
			setup();
		</script>
	</body>
</html>
