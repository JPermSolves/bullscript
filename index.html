<!DOCTYPE html>
<html>
	<head>
		<base href="https://jpermsolves.github.io/bull-script">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="apple-touch-icon" sizes="180x180" href="https://jpermsolves.github.io/bull-script/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="https://jpermsolves.github.io/bull-script/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://jpermsolves.github.io/bull-script/favicon-16x16.png">
		<link rel="manifest" href="https://jpermsolves.github.io/bull-script/site.webmanifest">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans&family=Noto+Sans+Arabic&family=Noto+Sans+Hebrew&family=Noto+Sans+Javanese&family=Noto+Sans+SC&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
		<title>Bullscript | A game about Unicode.</title>
		<style>
			body {
				text-align: center;
				margin: 10px;
				font-family: "Noto Sans";
			}
			p {
				font-size: 7em;
				margin: 10px;
			}
			button {
				font-family: "Noto Sans";
				font-size: 3em;
				white-space: normal !important;
			}
			.material-symbols-outlined {
				font-variation-settings:
				'FILL' 0,
				'wght' 400,
				'GRAD' 0,
				'opsz' 48
			}
		</style>
		<script>
			var char, charSet, character, charSetName, buttons, correctButton, falseCharSet, usedValues;
			const charSetList = ["Basic Latin (ASCII)", "Latin-1 Supplement", "Hebrew", "Hebrew", "Hebrew", "CJK Unified Ideographs (Han)", "Arabic", "Javanese", "Javanese", "Javanese", "Hiragana", "Hiragana"];
			const charSetFirstNumInIntervalList = [33, 161, 1425, 1488, 1519, 19968, 1537, 43392, 43471, 43486, 12353, 12441];
			const charSetLastNumInIntervalList = [127, 255, 1479, 1512, 1524, 40959, 1791, 43469, 43481, 43487, 12438, 12447];
			const fontList = ["Noto Sans", "Noto Sans", "Noto Sans Hebrew", "Noto Sans Hebrew", "Noto Sans Hebrew", "Noto Sans SC", "Noto Sans Arabic", "Noto Sans Javanese", "Noto Sans Javanese", "Noto Sans Javanese", "Noto Sans Japanese", "Noto Sans Japanese"]
			function randomIntFromInterval(min, max) { // min and max included 
				return Math.floor(Math.random() * (max - min + 1) + min);
			}
		</script>
	</head>
	<body>
		<header class="w3-container">
			<div class="w3-cell-row">
				<div class="w3-cell">
					<button class="w3-button w3-white w3-hover-gray" onclick="toggleBrightness();"><span class="material-symbols-outlined">brightness_6</span></button>
				</div>
				<div clss="w3-cell">
					<p>Bullscriptâ„¢</p>
				</div>
				<div>
					<button class="w3-button w3-white w3-hover-gray" onclick="openAbout();">About</button>
				</div>
			</div>
		</header>
		<div class="w3-container">
			<div class="w3-container">
				<p id="character"></p>
			</div>
			<div class="w3-container">
				<button id="button1" class="w3-button w3-block w3-red" onclick="verify(this);"></button>
			</div>
			<div class="w3-container">
				<button id="button2" class="w3-button w3-block w3-indigo" onclick="verify(this);"></button>
			</div>
			<div class="w3-container w3-margin-top">
				<button id="next" class="w3-button w3-block w3-black" onclick="setup();">Next</button>
			</div>
			<div class="w3-container">
				<p id="answer"></p>
			</div>
		</div>
		<script>
			function setup() {
				clickable = true;
				usedValues = [];
				character = document.getElementById("character");
				buttons = [document.getElementById("button1"), document.getElementById("button2")];
				charSet = randomIntFromInterval(0, charSetList.length - 1);
				char = randomIntFromInterval(charSetFirstNumInIntervalList[charSet], charSetLastNumInIntervalList[charSet]);
				charSetName = charSetList[charSet];
				character.innerHTML = String.fromCodePoint(char);
				correctButton = randomIntFromInterval(0, buttons.length - 1);
				buttons[correctButton].innerHTML = charSetName;
				usedValues.push(charSetName);
				for (let i = 0; i < buttons.length; i++) {
					if (i !== correctButton) {
						falseCharSet = randomIntFromInterval(0, charSetList.length - 1);
						while (usedValues.includes(charSetList[falseCharSet])) {
							falseCharSet = randomIntFromInterval(0, charSetList.length - 1);
						}
						buttons[i].innerHTML = charSetList[falseCharSet];
						usedValues.push(charSetList[falseCharSet]);
					}
				}
				document.getElementById("answer").innerHTML = "";
				character.style.fontFamily = fontList[charSet];
			}
			function verify(button) {
				if (clickable) {
					if (button.innerHTML === charSetName) {
						console.log("Nice.");
						document.getElementById("answer").innerHTML = "Correct";
						document.getElementById("answer").style.color = "green";
					} else {
						document.getElementById("answer").innerHTML = "Wrong";
						document.getElementById("answer").style.color = "red";
					}
					clickable = false;
				}
			}
			setup();
		</script>
	</body>
</html>
