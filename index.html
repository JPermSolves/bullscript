<!DOCTYPE html>
<html>
	<head>
		<base href="https://jpermsolves.github.io/bull-script">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="apple-touch-icon" sizes="180x180" href="https://jpermsolves.github.io/bull-script/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="https://jpermsolves.github.io/bull-script/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://jpermsolves.github.io/bull-script/favicon-16x16.png">
		<link rel="manifest" href="https://jpermsolves.github.io/bull-script/site.webmanifest">
		<title>Bullscript | A game about Unicode.</title>
		<style>
			body {
				text-align: center;
				margin: 10px;
				font-family: "Noto Sans";
			}
			p {
				font-size: 7em;
				margin: 10px;
			}
			button {
				font-family: "Noto Sans";
				font-size: 3em;
				transition-duration: 0.1s;
				border-style: solid;
				border-width: 1%;
				width: 41%;
				margin: 10px;
				color: white;
				background-color: black;
				height: 20%;
			}
			button:hover {
				color: black;
			}
			#button1 {
				border-color: red;
			}
			#button1:hover {
				background-color: red;
			}
			#button2 {
				border-color: yellow;
			}
			#button2:hover {
				background-color: yellow;
			}
		</style>
		<script>
			var char, charSet, character, charSetName, buttons, correctButton, falseCharSet, usedValues;
			const charSetList = ["Basic Latin (ASCII)", "Latin-1 Supplement", "Hebrew", "Hebrew", "Hebrew", "CJK Unified Ideographs (Han)"];
			const charSetFirstNumInIntervalList = [33, 161, 1425, 1488, 1519, 19968];
			const charSetLastNumInIntervalList = [127, 255, 1479, 1512, 1524, 40959];
			const fontList = ["Noto Sans", "Noto Sans", "Noto Sans Hebrew", "Noto Sans Hebrew", "Noto Sans Hebrew", "Noto Sans Chinese"]
			function randomIntFromInterval(min, max) { // min and max included 
				return Math.floor(Math.random() * (max - min + 1) + min);
			}
		</script>
	</head>
	<body>
		<p id="character"></p>
		<button id="button1" onclick="verify(this);"></button>
		<button id="button2" onclick="verify(this);"></button>
		<p id="answer"></p>
		<button onclick="setup();">Next</button>
		<script>
			function setup() {
				usedValues = [];
				character = document.getElementById("character");
				buttons = [document.getElementById("button1"), document.getElementById("button2")];
				charSet = randomIntFromInterval(0, charSetList.length - 1);
				char = randomIntFromInterval(charSetFirstNumInIntervalList[charSet], charSetLastNumInIntervalList[charSet]);
				charSetName = charSetList[charSet];
				character.innerHTML = String.fromCodePoint(char);
				correctButton = randomIntFromInterval(0, buttons.length - 1);
				buttons[correctButton].innerHTML = charSetName;
				usedValues.push(charSetName);
				for (let i = 0; i < buttons.length; i++) {
					if (i !== correctButton) {
						falseCharSet = randomIntFromInterval(0, charSetList.length - 1);
						while (usedValues.includes(charSetList[falseCharSet])) {
							falseCharSet = randomIntFromInterval(0, charSetList.length - 1);
						}
						buttons[i].innerHTML = charSetList[falseCharSet];
						usedValues.push(charSetList[falseCharSet]);
					}
				}
				document.getElementById("answer").innerHTML = "";
				character.style.fontFamily = fontList[charSet];
				}
			function verify(button) {
				if (button.innerHTML === charSetName) {
					console.log("Nice.");
					document.getElementById("answer").innerHTML = "Correct";
				} else {
					document.getElementById("answer").innerHTML = "Wrong";
				}
			}
			setup();
		</script>
	</body>
</html>
